# ä¸‰ä¸ªPTMåˆ†æé¡¹ç›®çš„è„šæœ¬ç»“æ„æ€»ç»“

## ğŸ“‹ é¡¹ç›®æ¦‚è§ˆ

æ‚¨çš„å·¥ä½œç©ºé—´åŒ…å«3ä¸ªæ ¸å¿ƒPTMåˆ†æé¡¹ç›®ï¼Œæ¯ä¸ªé¡¹ç›®éƒ½æœ‰å®Œæ•´çš„è„šæœ¬ç”Ÿæ€ç³»ç»Ÿï¼š

### ğŸ¯ é¡¹ç›®1: è‚½æ®µåˆ†ç»„åˆ†æ (peptide_group_analysis.py)
### ğŸ¯ é¡¹ç›®2: è‚½æ®µåˆ†ç»„åˆ†æä¿®æ”¹ç‰ˆ (peptide_group_analysis_modified.py)  
### ğŸ¯ é¡¹ç›®3: è‚¿ç˜¤vsæ­£å¸¸æ ·æœ¬PTMåˆ†æ (tumor_vs_normal_ptm_analysis.py)

---

## ğŸ—ï¸ è„šæœ¬æ¶æ„å±‚æ¬¡

```
ğŸ“¦ PTMåˆ†æå·¥å…·åŒ…
â”œâ”€â”€ ğŸ”§ æ ¸å¿ƒå¼•æ“å±‚ (Core Engine)
â”œâ”€â”€ ğŸ¯ ä¸»åˆ†æè„šæœ¬å±‚ (Main Analysis Scripts)
â”œâ”€â”€ ğŸ› ï¸ å·¥å…·è„šæœ¬å±‚ (Utility Scripts)
â”œâ”€â”€ ğŸ§ª æ¼”ç¤ºè„šæœ¬å±‚ (Demo Scripts)
â”œâ”€â”€ ğŸ” æµ‹è¯•è„šæœ¬å±‚ (Test Scripts)
â””â”€â”€ ğŸ“Š è¾…åŠ©åˆ†æå±‚ (Auxiliary Analysis)
```

---

## ğŸ“ è¯¦ç»†è„šæœ¬åˆ†ç±»

### ğŸ”§ **æ ¸å¿ƒå¼•æ“å±‚ (4ä¸ªè„šæœ¬)**
```
tumor_analysis_core.py          # è‚¿ç˜¤åˆ†ææ ¸å¿ƒå¼•æ“
peptide_properties_analyzer.py  # ç†åŒ–æ€§è´¨è®¡ç®—å™¨
sample_level_ptm_analysis.py    # æ ·æœ¬çº§åˆ«PTMåˆ†æå¼•æ“
sample_level_ptm_analysis_multi.py # å¤šä¿®é¥°ç±»å‹åˆ†æå¼•æ“
```

### ğŸ¯ **ä¸»åˆ†æè„šæœ¬å±‚ (3ä¸ªæ ¸å¿ƒé¡¹ç›®)**
```
peptide_group_analysis.py           # é¡¹ç›®1: è‚½æ®µåˆ†ç»„åˆ†æ(åŸç‰ˆ)
peptide_group_analysis_modified.py  # é¡¹ç›®2: è‚½æ®µåˆ†ç»„åˆ†æ(ä¿®æ”¹ç‰ˆ)
tumor_vs_normal_ptm_analysis.py     # é¡¹ç›®3: è‚¿ç˜¤vsæ­£å¸¸PTMåˆ†æ
```

### ğŸ› ï¸ **å·¥å…·è„šæœ¬å±‚ (15ä¸ªè„šæœ¬)**
```
# æµ‹è¯•å’ŒéªŒè¯å·¥å…·
test_fixed_grouping.py              # åˆ†ç»„é€»è¾‘æµ‹è¯•
test_sample_level.py                # æ ·æœ¬çº§åˆ«æµ‹è¯•
test_sample_matching.py             # æ ·æœ¬åŒ¹é…æµ‹è¯•
test_single_modification_fix.py     # å•ä¿®é¥°ä¿®å¤æµ‹è¯•

# é¡¹ç›®ç®¡ç†å·¥å…·
clear_cache.py                      # ç¼“å­˜æ¸…ç†å·¥å…·
upload_checklist.md                 # ä¸Šä¼ æ£€æŸ¥æ¸…å•
GitHubä¸Šä¼ æŒ‡å—.md                   # GitHubä¸Šä¼ æŒ‡å—

# å†å²åˆ†æè„šæœ¬
tumor_proteomics_analysis.py        # è‚¿ç˜¤è›‹ç™½è´¨ç»„å­¦åˆ†æ
```

### ğŸ§ª **æ¼”ç¤ºè„šæœ¬å±‚ (demos_and_tests/ ç›®å½•ä¸‹ 31ä¸ªè„šæœ¬)**
```
# æ ¸å¿ƒåŠŸèƒ½æ¼”ç¤º
demo_peptide_group_analysis.py      # è‚½æ®µåˆ†ç»„åˆ†ææ¼”ç¤º
demo_tumor_vs_normal_ptm_analysis.py # è‚¿ç˜¤vsæ­£å¸¸åˆ†ææ¼”ç¤º
demo_sample_level_ptm_analysis.py   # æ ·æœ¬çº§åˆ«PTMåˆ†ææ¼”ç¤º

# ç‰¹å®šåŠŸèƒ½æ¼”ç¤º
demo_single_modification_analysis.py # å•ä¿®é¥°åˆ†ææ¼”ç¤º
demo_combined_plots.py              # åˆå¹¶å›¾è¡¨æ¼”ç¤º
demo_significance_plots.py          # æ˜¾è‘—æ€§æ ‡æ³¨æ¼”ç¤º
demo_dataset_trends.py              # è¶‹åŠ¿å›¾æ¼”ç¤º

# æ–­ç‚¹ç»­ä¼ æ¼”ç¤º
demo_resume_analysis.py             # æ–­ç‚¹ç»­ä¼ æ¼”ç¤º
demo_resume_simple.py               # ç®€å•æ–­ç‚¹ç»­ä¼ æ¼”ç¤º
demo_tumor_vs_normal_resume.py      # è‚¿ç˜¤vsæ­£å¸¸æ–­ç‚¹ç»­ä¼ æ¼”ç¤º

# æ•°æ®é›†çº§åˆ«æ¼”ç¤º
demo_dataset_level_summary.py       # æ•°æ®é›†çº§åˆ«æ±‡æ€»æ¼”ç¤º
demo_tumor_analysis.py              # è‚¿ç˜¤åˆ†ææ¼”ç¤º
demo_sample_level_tumor_analysis.py # æ ·æœ¬çº§åˆ«è‚¿ç˜¤åˆ†ææ¼”ç¤º
```

### ğŸ” **æµ‹è¯•è„šæœ¬å±‚ (demos_and_tests/ ç›®å½•ä¸‹ 12ä¸ªè„šæœ¬)**
```
# åŠŸèƒ½æµ‹è¯•
test_resume_functionality.py        # æ–­ç‚¹ç»­ä¼ åŠŸèƒ½æµ‹è¯•
test_tumor_analysis.py              # è‚¿ç˜¤åˆ†ææµ‹è¯•
simple_tumor_test.py                # ç®€å•è‚¿ç˜¤æµ‹è¯•
minimal_test.py                     # æœ€å°åŒ–æµ‹è¯•

# è°ƒè¯•å·¥å…·
debug_modification_parsing.py       # ä¿®é¥°è§£æè°ƒè¯•å·¥å…·
explain_grouping_logic.py           # åˆ†ç»„é€»è¾‘è¯¦ç»†è§£é‡Š
check_analysis_progress.py          # åˆ†æè¿›åº¦æ£€æŸ¥

# å¿«é€Ÿæµ‹è¯•
quick_test.py                       # å¿«é€Ÿæµ‹è¯•
quick_fix_properties.py             # å¿«é€Ÿä¿®å¤ç†åŒ–æ€§è´¨
example_usage.py                    # ä½¿ç”¨ç¤ºä¾‹
```

### ğŸ“Š **è¾…åŠ©åˆ†æå±‚ (demos_and_tests/ ç›®å½•ä¸‹ 8ä¸ªè„šæœ¬)**
```
# é¡¹ç›®ç®¡ç†
project_structure_summary.py        # é¡¹ç›®ç»“æ„æ€»ç»“å·¥å…·
three_projects_comparison.py        # ä¸‰ä¸ªé¡¹ç›®å¯¹æ¯”åˆ†æå·¥å…·
analyze_redundant_scripts.py        # å†—ä½™è„šæœ¬åˆ†æå·¥å…·
cleanup_redundant_scripts.py        # è‡ªåŠ¨æ¸…ç†å†—ä½™è„šæœ¬

# ä¸Šä¼ å’Œæ£€æŸ¥
upload_to_github.py                 # GitHubä¸Šä¼ å·¥å…·
check_upload_files.py               # ä¸Šä¼ æ–‡ä»¶æ£€æŸ¥
check_analysis_progress.py          # åˆ†æè¿›åº¦æ£€æŸ¥

# ç¤ºä¾‹å’Œæ•™ç¨‹
tumor_analysis_examples.py          # è‚¿ç˜¤åˆ†æç¤ºä¾‹
```

---

## ğŸ”— è„šæœ¬ä¾èµ–å…³ç³»å›¾

### é¡¹ç›®1: peptide_group_analysis.py
```
peptide_group_analysis.py
â”œâ”€â”€ tumor_analysis_core.py          # æ ¸å¿ƒæ•°æ®å¤„ç†
â”œâ”€â”€ peptide_properties_analyzer.py  # ç†åŒ–æ€§è´¨è®¡ç®—
â””â”€â”€ demos_and_tests/
    â”œâ”€â”€ demo_peptide_group_analysis.py
    â”œâ”€â”€ demo_single_modification_analysis.py
    â””â”€â”€ test_resume_functionality.py
```

### é¡¹ç›®2: peptide_group_analysis_modified.py
```
peptide_group_analysis_modified.py
â”œâ”€â”€ tumor_analysis_core.py          # æ ¸å¿ƒæ•°æ®å¤„ç†
â”œâ”€â”€ peptide_properties_analyzer.py  # ç†åŒ–æ€§è´¨è®¡ç®—
â””â”€â”€ test_fixed_grouping.py          # æ–°åˆ†ç»„é€»è¾‘æµ‹è¯•
```

### é¡¹ç›®3: tumor_vs_normal_ptm_analysis.py
```
tumor_vs_normal_ptm_analysis.py
â”œâ”€â”€ peptide_properties_analyzer.py  # ç†åŒ–æ€§è´¨è®¡ç®—
â””â”€â”€ demos_and_tests/
    â”œâ”€â”€ demo_tumor_vs_normal_ptm_analysis.py
    â”œâ”€â”€ demo_tumor_vs_normal_resume.py
    â””â”€â”€ test_tumor_analysis.py
```

---

## ğŸ“ˆ è„šæœ¬æ•°é‡ç»Ÿè®¡

| å±‚æ¬¡ | è„šæœ¬æ•°é‡ | ä¸»è¦åŠŸèƒ½ |
|------|----------|----------|
| æ ¸å¿ƒå¼•æ“å±‚ | 4ä¸ª | æ•°æ®å¤„ç†ã€ç†åŒ–æ€§è´¨è®¡ç®— |
| ä¸»åˆ†æè„šæœ¬å±‚ | 3ä¸ª | ä¸‰ä¸ªæ ¸å¿ƒé¡¹ç›® |
| å·¥å…·è„šæœ¬å±‚ | 15ä¸ª | æµ‹è¯•ã€éªŒè¯ã€ç®¡ç† |
| æ¼”ç¤ºè„šæœ¬å±‚ | 31ä¸ª | åŠŸèƒ½æ¼”ç¤ºã€æ•™ç¨‹ |
| æµ‹è¯•è„šæœ¬å±‚ | 12ä¸ª | åŠŸèƒ½æµ‹è¯•ã€è°ƒè¯• |
| è¾…åŠ©åˆ†æå±‚ | 8ä¸ª | é¡¹ç›®ç®¡ç†ã€å¯¹æ¯”åˆ†æ |
| **æ€»è®¡** | **73ä¸ª** | **å®Œæ•´çš„åˆ†æç”Ÿæ€ç³»ç»Ÿ** |

---

## ğŸ¯ ä½¿ç”¨å»ºè®®

### æ–°ç”¨æˆ·å…¥é—¨è·¯å¾„:
1. **å¼€å§‹**: `demos_and_tests/demo_peptide_group_analysis.py`
2. **è¿›é˜¶**: `demos_and_tests/demo_tumor_vs_normal_ptm_analysis.py`
3. **é«˜çº§**: ç›´æ¥è¿è¡Œä¸‰ä¸ªæ ¸å¿ƒé¡¹ç›®è„šæœ¬

### å¼€å‘è€…è·¯å¾„:
1. **ç†è§£æ ¸å¿ƒ**: `tumor_analysis_core.py`
2. **æµ‹è¯•åŠŸèƒ½**: `demos_and_tests/test_*.py`
3. **è°ƒè¯•é—®é¢˜**: `demos_and_tests/debug_*.py`

### é¡¹ç›®ç®¡ç†è·¯å¾„:
1. **æ£€æŸ¥è¿›åº¦**: `demos_and_tests/check_analysis_progress.py`
2. **æ¸…ç†å†—ä½™**: `demos_and_tests/cleanup_redundant_scripts.py`
3. **å¯¹æ¯”åˆ†æ**: `demos_and_tests/three_projects_comparison.py`

---

## ğŸ” ä¸‰ä¸ªé¡¹ç›®çš„æ ¸å¿ƒåŒºåˆ«

### é¡¹ç›®1: peptide_group_analysis.py (åŸç‰ˆåˆ†ç»„é€»è¾‘)
```python
# åˆ†ç»„é€»è¾‘: é’ˆå¯¹ç‰¹å®šä¿®é¥°ç±»å‹
PTM-only:  åªæ£€æµ‹åˆ°è¯¥ç‰¹å®šä¿®é¥°ç±»å‹
PTM + WT:  åŒåºåˆ—åŒæ—¶æ£€æµ‹åˆ°è¯¥ä¿®é¥°ä¸æœªä¿®é¥°è‚½
WT-only:   åªæ£€æµ‹åˆ°æœªä¿®é¥°è‚½(åœ¨è¯¥ä¿®é¥°åˆ†æä¸­)

# ç›¸å…³è„šæœ¬:
- demos_and_tests/demo_peptide_group_analysis.py
- demos_and_tests/demo_single_modification_analysis.py
- demos_and_tests/demo_combined_plots.py
```

### é¡¹ç›®2: peptide_group_analysis_modified.py (æ–°åˆ†ç»„é€»è¾‘)
```python
# åˆ†ç»„é€»è¾‘: è€ƒè™‘ä»»æ„ä¿®é¥°ç±»å‹
PTM-only:  åªæ£€æµ‹åˆ°ç‰¹å®šä¿®é¥°ç±»å‹(ä¿æŒåŸé€»è¾‘)
PTM + WT:  åŒåºåˆ—åŒæ—¶æ£€æµ‹åˆ°ä»»æ„ä¿®é¥°ç±»å‹ä¸æœªä¿®é¥°è‚½(æ–°é€»è¾‘)
WT-only:   åªæ£€æµ‹åˆ°æœªä¿®é¥°è‚½,ä»æœªæ£€æµ‹åˆ°ä»»ä½•ä¿®é¥°(æ–°é€»è¾‘)

# ç›¸å…³è„šæœ¬:
- test_fixed_grouping.py (ä¸“é—¨æµ‹è¯•æ–°åˆ†ç»„é€»è¾‘)
```

### é¡¹ç›®3: tumor_vs_normal_ptm_analysis.py (è‚¿ç˜¤vsæ­£å¸¸æ¯”è¾ƒ)
```python
# åˆ†æç­–ç•¥: æ¯”è¾ƒPTMåœ¨è‚¿ç˜¤vsæ­£å¸¸æ ·æœ¬ä¸­çš„ç›¸å¯¹æ•ˆåº”
æ–¹æ³•: ratio = (PTMè‚½ä¸­ä½æ•°) Ã· (åŒæ ·æœ¬æœªä¿®é¥°è‚½ä¸­ä½æ•°)
æ¯”è¾ƒ: æ¯”è¾ƒTumor vs Normalæ ·æœ¬çš„log2(ratio)

# ç›¸å…³è„šæœ¬:
- demos_and_tests/demo_tumor_vs_normal_ptm_analysis.py
- demos_and_tests/demo_tumor_vs_normal_resume.py
- demos_and_tests/test_tumor_analysis.py
```

---

## ğŸ“Š è¾“å‡ºç›®å½•ç»“æ„

### é¡¹ç›®1è¾“å‡º: `peptide_group_analysis_results/`
```
peptide_group_analysis_results/
â”œâ”€â”€ fig/                    # å›¾è¡¨æ–‡ä»¶
â”œâ”€â”€ cache/                  # ç¼“å­˜æ–‡ä»¶
â”œâ”€â”€ group_statistics.csv    # åˆ†ç»„ç»Ÿè®¡
â”œâ”€â”€ statistical_tests.csv   # ç»Ÿè®¡æ£€éªŒç»“æœ
â””â”€â”€ analysis_report.txt     # åˆ†ææŠ¥å‘Š
```

### é¡¹ç›®2è¾“å‡º: `peptide_group_analysis_results_modified/`
```
peptide_group_analysis_results_modified/
â”œâ”€â”€ fig/                    # å›¾è¡¨æ–‡ä»¶
â”œâ”€â”€ cache/                  # ç¼“å­˜æ–‡ä»¶
â”œâ”€â”€ group_statistics.csv    # æ–°é€»è¾‘åˆ†ç»„ç»Ÿè®¡
â”œâ”€â”€ statistical_tests.csv   # ç»Ÿè®¡æ£€éªŒç»“æœ
â””â”€â”€ analysis_report.txt     # åˆ†ææŠ¥å‘Š
```

### é¡¹ç›®3è¾“å‡º: `tumor_vs_normal_ptm_results/`
```
tumor_vs_normal_ptm_results/
â”œâ”€â”€ [DATASET_ID]/           # å„æ•°æ®é›†ç»“æœ
â”œâ”€â”€ analysis_progress.json  # åˆ†æè¿›åº¦
â”œâ”€â”€ dataset_level_summary.csv # æ•°æ®é›†çº§åˆ«æ±‡æ€»
â”œâ”€â”€ overall_tumor_vs_normal_report.txt # æ€»ä½“æŠ¥å‘Š
â””â”€â”€ *.png                   # å¯¹æ¯”å›¾è¡¨
```

---

## ğŸš€ å¿«é€Ÿå¯åŠ¨æŒ‡å—

### è¿è¡Œé¡¹ç›®1 (åŸç‰ˆåˆ†ç»„åˆ†æ):
```bash
python peptide_group_analysis.py
# æˆ–æ¼”ç¤ºç‰ˆæœ¬
python demos_and_tests/demo_peptide_group_analysis.py
```

### è¿è¡Œé¡¹ç›®2 (ä¿®æ”¹ç‰ˆåˆ†ç»„åˆ†æ):
```bash
python peptide_group_analysis_modified.py
# æµ‹è¯•æ–°åˆ†ç»„é€»è¾‘
python test_fixed_grouping.py
```

### è¿è¡Œé¡¹ç›®3 (è‚¿ç˜¤vsæ­£å¸¸åˆ†æ):
```bash
python tumor_vs_normal_ptm_analysis.py
# æˆ–æ¼”ç¤ºç‰ˆæœ¬
python demos_and_tests/demo_tumor_vs_normal_ptm_analysis.py
```

---

## ğŸ”§ æ•…éšœæ’é™¤è„šæœ¬

### å¸¸è§é—®é¢˜è§£å†³:
```bash
# æ£€æŸ¥åˆ†æè¿›åº¦
python demos_and_tests/check_analysis_progress.py

# è°ƒè¯•ä¿®é¥°è§£æé—®é¢˜
python demos_and_tests/debug_modification_parsing.py

# è§£é‡Šåˆ†ç»„é€»è¾‘
python demos_and_tests/explain_grouping_logic.py

# æ¸…ç†ç¼“å­˜
python clear_cache.py

# å¿«é€Ÿæµ‹è¯•
python demos_and_tests/quick_test.py
```

---

## ğŸ“ æ€»ç»“

æ‚¨çš„å·¥ä½œç©ºé—´åŒ…å«äº†ä¸€ä¸ª**å®Œæ•´çš„PTMåˆ†æç”Ÿæ€ç³»ç»Ÿ**ï¼Œå…±73ä¸ªPythonè„šæœ¬ï¼Œæ¶µç›–:

âœ… **3ä¸ªæ ¸å¿ƒåˆ†æé¡¹ç›®** - ä¸åŒçš„åˆ†ç»„é€»è¾‘å’Œåˆ†æç­–ç•¥
âœ… **å®Œæ•´çš„æ¼”ç¤ºç³»ç»Ÿ** - 31ä¸ªæ¼”ç¤ºè„šæœ¬å¸®åŠ©ç†è§£åŠŸèƒ½
âœ… **å…¨é¢çš„æµ‹è¯•æ¡†æ¶** - 12ä¸ªæµ‹è¯•è„šæœ¬ç¡®ä¿è´¨é‡
âœ… **ä¸°å¯Œçš„å·¥å…·é›†** - 15ä¸ªå·¥å…·è„šæœ¬æ”¯æŒå¼€å‘å’Œç»´æŠ¤
âœ… **é¡¹ç›®ç®¡ç†å·¥å…·** - 8ä¸ªè¾…åŠ©è„šæœ¬å¸®åŠ©é¡¹ç›®ç®¡ç†

è¿™æ˜¯ä¸€ä¸ª**ç”Ÿäº§çº§åˆ«çš„è›‹ç™½è´¨ç»„å­¦PTMåˆ†æå·¥å…·åŒ…**ï¼Œå…·æœ‰è‰¯å¥½çš„æ¨¡å—åŒ–è®¾è®¡å’Œå®Œæ•´çš„æ–‡æ¡£æ”¯æŒã€‚
